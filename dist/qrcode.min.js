/*! jsqrcode v1.0.0, (c) 2016 Antelle, fork of https://github.com/LazarSoft/jsqrcode, port of http://code.google.com/p/zxing, http://opensource.org/licenses/Apache-2.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.qrcode=t():e.qrcode=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){function t(){var e=o(a());e.width=f,e.height=u,e.imagedata=c;for(var t=new r(e),n=t.detect(),i=s.decode(n.bits),h=i.getDataByte(),w="",l=0;l<h.length;l++)for(var d=0;d<h[l].length;d++)w+=String.fromCharCode(h[l][d]);return w}function n(e,t){if(e>f||t>u)throw"point error";var n=4*e+t*f*4;return(33*c.data[n]+34*c.data[n+1]+33*c.data[n+2])/100}function i(){for(var t=4,n=Math.floor(f/t),i=Math.floor(u/t),r=new Array(t),s=0;t>s;s++){r[s]=new Array(t);for(var o=0;t>o;o++)r[s][o]=[0,0]}var a,h;for(h=0;t>h;h++)for(a=0;t>a;a++){r[a][h][0]=255;for(var w=0;i>w;w++)for(var c=0;n>c;c++){var l=e[n*a+c+(i*h+w)*f];l<r[a][h][0]&&(r[a][h][0]=l),l>r[a][h][1]&&(r[a][h][1]=l)}}for(var d=new Array(t),v=0;t>v;v++)d[v]=new Array(t);for(h=0;t>h;h++)for(a=0;t>a;a++)d[a][h]=Math.floor((r[a][h][0]+r[a][h][1])/2);return d}function o(e){for(var t=i(e),n=t.length,r=Math.floor(f/n),s=Math.floor(u/n),o=new Array(u*f),a=0;n>a;a++)for(var h=0;n>h;h++)for(var w=0;s>w;w++)for(var c=0;r>c;c++)o[r*h+c+(s*a+w)*f]=e[r*h+c+(s*a+w)*f]<t[h][a];return o}function a(){for(var e=new Array(f*u),t=0;u>t;t++)for(var i=0;f>i;i++)e[i+t*f]=n(i,t);return e}var h,w,f,u,c,l=1048576;this.decode=function(){h=document.createElement("canvas"),w=h.getContext("2d");var n=e.height,i=e.width;if(e.width*e.height>l){var r=e.width/e.height;n=Math.sqrt(l/r),i=r*n}return h.width=i,h.height=n,w.drawImage(e,0,0,h.width,h.height),f=h.width,u=h.height,c=w.getImageData(0,0,h.width,h.height),t()}}var r=n(13),s=n(12);e.exports=i},function(e,t){"use strict";function n(e){this.expTable=new Array(256),this.logTable=new Array(256);var t,n=1;for(t=0;256>t;t++)this.expTable[t]=n,n<<=1,n>=256&&(n^=e);for(t=0;255>t;t++)this.logTable[this.expTable[t]]=t;var r=new Array(1);r[0]=0,this.zero=new i(this,new Array(r));var s=new Array(1);s[0]=1,this.one=new i(this,new Array(s)),this.buildMonomial=function(e,n){if(0>e)throw"System.ArgumentException";if(0===n)return this.zero;var r=new Array(e+1);for(t=0;t<r.length;t++)r[t]=0;return r[0]=n,new i(this,r)},this.exp=function(e){return this.expTable[e]},this.log=function(e){if(0===e)throw"System.ArgumentException";return this.logTable[e]},this.inverse=function(e){if(0===e)throw"System.ArithmeticException";return this.expTable[255-this.logTable[e]]},this.multiply=function(e,t){return 0===e||0===t?0:1===e?t:1===t?e:this.expTable[(this.logTable[e]+this.logTable[t])%255]}}function i(e,t){if(!t||0===t.length)throw"System.ArgumentException";this.field=e;var r,s=t.length;if(s>1&&0===t[0]){for(var o=1;s>o&&0===t[o];)o++;if(o===s)this.coefficients=e.zero.coefficients;else{for(this.coefficients=new Array(s-o),r=0;r<this.coefficients.length;r++)this.coefficients[r]=0;for(var a=0;a<this.coefficients.length;a++)this.coefficients[a]=t[o+a]}}else this.coefficients=t;Object.defineProperty(this,"zero",{get:function(){return 0===this.coefficients[0]}}),Object.defineProperty(this,"degree",{get:function(){return this.coefficients.length-1}}),this.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},this.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t=this.coefficients.length;if(1===e){var i=0;for(r=0;t>r;r++)i=n.addOrSubtract(i,this.coefficients[r]);return i}var s=this.coefficients[0];for(r=1;t>r;r++)s=n.addOrSubtract(this.field.multiply(e,s),this.coefficients[r]);return s},this.addOrSubtract=function(t){if(this.field!==t.field)throw"GF256Polys do not have same GF256 field";if(this.zero)return t;if(t.zero)return this;var s=this.coefficients,o=t.coefficients;if(s.length>o.length){var a=s;s=o,o=a}for(var h=new Array(o.length),w=o.length-s.length,f=0;w>f;f++)h[f]=o[f];for(r=w;r<o.length;r++)h[r]=n.addOrSubtract(s[r-w],o[r]);return new i(e,h)},this.multiply1=function(e){if(this.field!==e.field)throw"GF256Polys do not have same GF256 field";if(this.zero||e.zero)return this.field.zero;var t=this.coefficients,s=t.length,o=e.coefficients,a=o.length,h=new Array(s+a-1);for(r=0;s>r;r++)for(var w=t[r],f=0;a>f;f++)h[r+f]=n.addOrSubtract(h[r+f],this.field.multiply(w,o[f]));return new i(this.field,h)},this.multiply2=function(e){if(0===e)return this.field.zero;if(1===e)return this;var t=this.coefficients.length,n=new Array(t);for(r=0;t>r;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new i(this.field,n)},this.multiplyByMonomial=function(e,t){if(0>e)throw"System.ArgumentException";if(0===t)return this.field.zero;var n=this.coefficients.length,s=new Array(n+e);for(r=0;r<s.length;r++)s[r]=0;for(r=0;n>r;r++)s[r]=this.field.multiply(this.coefficients[r],t);return new i(this.field,s)}}n.QR_CODE_FIELD=new n(285),n.DATA_MATRIX_FIELD=new n(301),n.addOrSubtract=function(e,t){return e^t},e.exports.GF256=n,e.exports.GF256Poly=i},function(e,t){"use strict";function n(e,t){return e>=0?e>>t:(e>>t)+(2<<~t)}e.exports={URShift:n}},function(e,t,n){"use strict";function i(e,t){if(t||(t=e),1>e||1>t)throw"Both dimensions must be greater than 0";this.width=e,this.height=t;var n=e>>5;0!==(31&e)&&n++,this.rowSize=n,this.bits=new Array(n*t);for(var i=0;i<this.bits.length;i++)this.bits[i]=0;this.getDimension=function(){if(this.width!==this.height)throw"Can get dimension on a non-square matrix";return this.width},this.getValue=function(e,t){var n=t*this.rowSize+(e>>5);return 0!==(1&r(this.bits[n],31&e))},this.setValue=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]|=1<<(31&e)},this.flip=function(e,t){var n=t*this.rowSize+(e>>5);this.bits[n]^=1<<(31&e)},this.setRegion=function(e,t,n,i){if(0>t||0>e)throw"Left and top must be nonnegative";if(1>i||1>n)throw"Height and width must be at least 1";var r=e+n,s=t+i;if(s>this.height||r>this.width)throw"The region must fit inside the matrix";for(var o=t;s>o;o++)for(var a=o*this.rowSize,h=e;r>h;h++)this.bits[a+(h>>5)]|=1<<(31&h)}}var r=n(2).URShift;e.exports=i},function(e,t,n){"use strict";function i(e){this.errorCorrectionLevel=r.forBits(e>>3&3),this.dataMask=7&e}var r=n(14),s=n(2).URShift,o=21522,a=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]],h=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];i.numBitsDiffering=function(e,t){return e^=t,h[15&e]+h[15&s(e,4)]+h[15&s(e,8)]+h[15&s(e,12)]+h[15&s(e,16)]+h[15&s(e,20)]+h[15&s(e,24)]+h[15&s(e,28)]},i.decodeFormatInformation=function(e){var t=i.doDecodeFormatInformation(e);return t?t:i.doDecodeFormatInformation(e^o)},i.doDecodeFormatInformation=function(e){for(var t=4294967295,n=0,r=0;r<a.length;r++){var s=a[r],o=s[0];if(o===e)return new i(s[1]);var h=this.numBitsDiffering(e,o);t>h&&(n=s[1],t=h)}return 3>=t?new i(n):null},e.exports=i},function(e,t){"use strict";function n(e,t,i,r,s,o,a,h,w){this.a11=e,this.a12=r,this.a13=a,this.a21=t,this.a22=s,this.a23=h,this.a31=i,this.a32=o,this.a33=w,this.transformPoints1=function(n){for(var f=n.length,u=0;f>u;u+=2){var c=n[u],l=n[u+1],d=a*c+h*l+w;n[u]=(e*c+t*l+i)/d,n[u+1]=(r*c+s*l+o)/d}},this.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}n.quadrilateralToQuadrilateral=function(e,t,n,i,r,s,o,a,h,w,f,u,c,l,d,v){var g=this.quadrilateralToSquare(e,t,n,i,r,s,o,a),m=this.squareToQuadrilateral(h,w,f,u,c,l,d,v);return m.times(g)},n.squareToQuadrilateral=function(e,t,i,r,s,o,a,h){var w=h-o,f=t-r+o-h;if(0===w&&0===f)return new n(i-e,s-i,e,r-t,o-r,t,0,0,1);var u=i-s,c=a-s,l=e-i+s-a,d=r-o,v=u*w-c*d,g=(l*w-c*f)/v,m=(u*f-l*d)/v;return new n(i-e+g*i,a-e+m*a,e,r-t+g*r,h-t+m*h,t,g,m,1)},n.quadrilateralToSquare=function(e,t,n,i,r,s,o,a){return this.squareToQuadrilateral(e,t,n,i,r,s,o,a).buildAdjoint()},e.exports=n},function(e,t,n){"use strict";function i(e,t){this.count=e,this.dataCodewords=t}function r(e,t,n){this.ecCodewordsPerBlock=e,n?this.ecBlocks=[t,n]:this.ecBlocks=[t],this.getECBlocks=function(){return this.ecBlocks}}function s(e,t,n,i,r,s){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=[n,i,r,s];for(var o=0,h=n.ecCodewordsPerBlock,w=n.getECBlocks(),f=0;f<w.length;f++){var u=w[f];o+=u.count*(u.dataCodewords+h)}this.totalCodewords=o,this.getDimensionForVersion=function(){return 17+4*this.versionNumber},this.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new a(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;n>i;i++)for(var r=this.alignmentPatternCenters[i]-2,s=0;n>s;s++)0===i&&(0===s||s===n-1)||i===n-1&&0===s||t.setRegion(this.alignmentPatternCenters[s]-2,r,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},this.getECBlocksForLevel=function(e){return this.ecBlocks[e.ordinal]}}function o(){return[new s(1,[],new r(7,new i(1,19)),new r(10,new i(1,16)),new r(13,new i(1,13)),new r(17,new i(1,9))),new s(2,[6,18],new r(10,new i(1,34)),new r(16,new i(1,28)),new r(22,new i(1,22)),new r(28,new i(1,16))),new s(3,[6,22],new r(15,new i(1,55)),new r(26,new i(1,44)),new r(18,new i(2,17)),new r(22,new i(2,13))),new s(4,[6,26],new r(20,new i(1,80)),new r(18,new i(2,32)),new r(26,new i(2,24)),new r(16,new i(4,9))),new s(5,[6,30],new r(26,new i(1,108)),new r(24,new i(2,43)),new r(18,new i(2,15),new i(2,16)),new r(22,new i(2,11),new i(2,12))),new s(6,[6,34],new r(18,new i(2,68)),new r(16,new i(4,27)),new r(24,new i(4,19)),new r(28,new i(4,15))),new s(7,[6,22,38],new r(20,new i(2,78)),new r(18,new i(4,31)),new r(18,new i(2,14),new i(4,15)),new r(26,new i(4,13),new i(1,14))),new s(8,[6,24,42],new r(24,new i(2,97)),new r(22,new i(2,38),new i(2,39)),new r(22,new i(4,18),new i(2,19)),new r(26,new i(4,14),new i(2,15))),new s(9,[6,26,46],new r(30,new i(2,116)),new r(22,new i(3,36),new i(2,37)),new r(20,new i(4,16),new i(4,17)),new r(24,new i(4,12),new i(4,13))),new s(10,[6,28,50],new r(18,new i(2,68),new i(2,69)),new r(26,new i(4,43),new i(1,44)),new r(24,new i(6,19),new i(2,20)),new r(28,new i(6,15),new i(2,16))),new s(11,[6,30,54],new r(20,new i(4,81)),new r(30,new i(1,50),new i(4,51)),new r(28,new i(4,22),new i(4,23)),new r(24,new i(3,12),new i(8,13))),new s(12,[6,32,58],new r(24,new i(2,92),new i(2,93)),new r(22,new i(6,36),new i(2,37)),new r(26,new i(4,20),new i(6,21)),new r(28,new i(7,14),new i(4,15))),new s(13,[6,34,62],new r(26,new i(4,107)),new r(22,new i(8,37),new i(1,38)),new r(24,new i(8,20),new i(4,21)),new r(22,new i(12,11),new i(4,12))),new s(14,[6,26,46,66],new r(30,new i(3,115),new i(1,116)),new r(24,new i(4,40),new i(5,41)),new r(20,new i(11,16),new i(5,17)),new r(24,new i(11,12),new i(5,13))),new s(15,[6,26,48,70],new r(22,new i(5,87),new i(1,88)),new r(24,new i(5,41),new i(5,42)),new r(30,new i(5,24),new i(7,25)),new r(24,new i(11,12),new i(7,13))),new s(16,[6,26,50,74],new r(24,new i(5,98),new i(1,99)),new r(28,new i(7,45),new i(3,46)),new r(24,new i(15,19),new i(2,20)),new r(30,new i(3,15),new i(13,16))),new s(17,[6,30,54,78],new r(28,new i(1,107),new i(5,108)),new r(28,new i(10,46),new i(1,47)),new r(28,new i(1,22),new i(15,23)),new r(28,new i(2,14),new i(17,15))),new s(18,[6,30,56,82],new r(30,new i(5,120),new i(1,121)),new r(26,new i(9,43),new i(4,44)),new r(28,new i(17,22),new i(1,23)),new r(28,new i(2,14),new i(19,15))),new s(19,[6,30,58,86],new r(28,new i(3,113),new i(4,114)),new r(26,new i(3,44),new i(11,45)),new r(26,new i(17,21),new i(4,22)),new r(26,new i(9,13),new i(16,14))),new s(20,[6,34,62,90],new r(28,new i(3,107),new i(5,108)),new r(26,new i(3,41),new i(13,42)),new r(30,new i(15,24),new i(5,25)),new r(28,new i(15,15),new i(10,16))),new s(21,[6,28,50,72,94],new r(28,new i(4,116),new i(4,117)),new r(26,new i(17,42)),new r(28,new i(17,22),new i(6,23)),new r(30,new i(19,16),new i(6,17))),new s(22,[6,26,50,74,98],new r(28,new i(2,111),new i(7,112)),new r(28,new i(17,46)),new r(30,new i(7,24),new i(16,25)),new r(24,new i(34,13))),new s(23,[6,30,54,74,102],new r(30,new i(4,121),new i(5,122)),new r(28,new i(4,47),new i(14,48)),new r(30,new i(11,24),new i(14,25)),new r(30,new i(16,15),new i(14,16))),new s(24,[6,28,54,80,106],new r(30,new i(6,117),new i(4,118)),new r(28,new i(6,45),new i(14,46)),new r(30,new i(11,24),new i(16,25)),new r(30,new i(30,16),new i(2,17))),new s(25,[6,32,58,84,110],new r(26,new i(8,106),new i(4,107)),new r(28,new i(8,47),new i(13,48)),new r(30,new i(7,24),new i(22,25)),new r(30,new i(22,15),new i(13,16))),new s(26,[6,30,58,86,114],new r(28,new i(10,114),new i(2,115)),new r(28,new i(19,46),new i(4,47)),new r(28,new i(28,22),new i(6,23)),new r(30,new i(33,16),new i(4,17))),new s(27,[6,34,62,90,118],new r(30,new i(8,122),new i(4,123)),new r(28,new i(22,45),new i(3,46)),new r(30,new i(8,23),new i(26,24)),new r(30,new i(12,15),new i(28,16))),new s(28,[6,26,50,74,98,122],new r(30,new i(3,117),new i(10,118)),new r(28,new i(3,45),new i(23,46)),new r(30,new i(4,24),new i(31,25)),new r(30,new i(11,15),new i(31,16))),new s(29,[6,30,54,78,102,126],new r(30,new i(7,116),new i(7,117)),new r(28,new i(21,45),new i(7,46)),new r(30,new i(1,23),new i(37,24)),new r(30,new i(19,15),new i(26,16))),new s(30,[6,26,52,78,104,130],new r(30,new i(5,115),new i(10,116)),new r(28,new i(19,47),new i(10,48)),new r(30,new i(15,24),new i(25,25)),new r(30,new i(23,15),new i(25,16))),new s(31,[6,30,56,82,108,134],new r(30,new i(13,115),new i(3,116)),new r(28,new i(2,46),new i(29,47)),new r(30,new i(42,24),new i(1,25)),new r(30,new i(23,15),new i(28,16))),new s(32,[6,34,60,86,112,138],new r(30,new i(17,115)),new r(28,new i(10,46),new i(23,47)),new r(30,new i(10,24),new i(35,25)),new r(30,new i(19,15),new i(35,16))),new s(33,[6,30,58,86,114,142],new r(30,new i(17,115),new i(1,116)),new r(28,new i(14,46),new i(21,47)),new r(30,new i(29,24),new i(19,25)),new r(30,new i(11,15),new i(46,16))),new s(34,[6,34,62,90,118,146],new r(30,new i(13,115),new i(6,116)),new r(28,new i(14,46),new i(23,47)),new r(30,new i(44,24),new i(7,25)),new r(30,new i(59,16),new i(1,17))),new s(35,[6,30,54,78,102,126,150],new r(30,new i(12,121),new i(7,122)),new r(28,new i(12,47),new i(26,48)),new r(30,new i(39,24),new i(14,25)),new r(30,new i(22,15),new i(41,16))),new s(36,[6,24,50,76,102,128,154],new r(30,new i(6,121),new i(14,122)),new r(28,new i(6,47),new i(34,48)),new r(30,new i(46,24),new i(10,25)),new r(30,new i(2,15),new i(64,16))),new s(37,[6,28,54,80,106,132,158],new r(30,new i(17,122),new i(4,123)),new r(28,new i(29,46),new i(14,47)),new r(30,new i(49,24),new i(10,25)),new r(30,new i(24,15),new i(46,16))),new s(38,[6,32,58,84,110,136,162],new r(30,new i(4,122),new i(18,123)),new r(28,new i(13,46),new i(32,47)),new r(30,new i(48,24),new i(14,25)),new r(30,new i(42,15),new i(32,16))),new s(39,[6,26,54,82,110,138,166],new r(30,new i(20,117),new i(4,118)),new r(28,new i(40,47),new i(7,48)),new r(30,new i(43,24),new i(22,25)),new r(30,new i(10,15),new i(67,16))),new s(40,[6,30,58,86,114,142,170],new r(30,new i(19,118),new i(6,119)),new r(28,new i(18,47),new i(31,48)),new r(30,new i(34,24),new i(34,25)),new r(30,new i(20,15),new i(61,16)))]}var a=n(3),h=n(4);s.VERSION_DECODE_INFO=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017],s.VERSIONS=o(),s.getVersionForNumber=function(e){if(1>e||e>40)throw"ArgumentException";return s.VERSIONS[e-1]},s.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw"Error getProvisionalVersionForDimension";try{return s.getVersionForNumber(e-17>>2)}catch(t){throw"Error getVersionForNumber"}},s.decodeVersionInformation=function(e){for(var t=4294967295,n=0,i=0;i<s.VERSION_DECODE_INFO.length;i++){var r=s.VERSION_DECODE_INFO[i];if(r===e)return this.getVersionForNumber(i+7);var o=h.numBitsDiffering(e,r);t>o&&(n=i+7,t=o)}return 3>=t?this.getVersionForNumber(n):null},e.exports=s},function(e,t,n){"use strict";function i(e,t,n,i,s,o){this.image=e,this.possibleCenters=[],this.width=i,this.height=s,this.moduleSize=o,this.crossCheckStateCount=[0,0,0],this.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},this.foundPatternCross=function(e){for(var t=this.moduleSize/2,n=0;3>n;n++)if(Math.abs(o-e[n])>=t)return!1;return!0},this.crossCheckVertical=function(t,n,i,r){var s=e.height,o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var a=t;a>=0&&e[n+a*e.width]&&o[1]<=i;)o[1]++,a--;if(0>a||o[1]>i)return NaN;for(;a>=0&&!e[n+a*e.width]&&o[0]<=i;)o[0]++,a--;if(o[0]>i)return NaN;for(a=t+1;s>a&&e[n+a*e.width]&&o[1]<=i;)o[1]++,a++;if(a===s||o[1]>i)return NaN;for(;s>a&&!e[n+a*e.width]&&o[2]<=i;)o[2]++,a++;if(o[2]>i)return NaN;var h=o[0]+o[1]+o[2];return 5*Math.abs(h-r)>=2*r?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,a):NaN},this.handlePossibleCenter=function(e,t,n){var i=e[0]+e[1]+e[2],s=this.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),2*e[1],i);if(!isNaN(o)){for(var a=(e[0]+e[1]+e[2])/3,h=this.possibleCenters.length,w=0;h>w;w++){var f=this.possibleCenters[w];if(f.aboutEquals(a,o,s))return new r(s,o,a)}var u=new r(s,o,a);this.possibleCenters.push(u)}return null},this.find=function(){for(var r,o=t+i,a=n+(s>>1),h=[0,0,0],w=0;s>w;w++){var f=a+(0===(1&w)?w+1>>1:-(w+1>>1));h[0]=0,h[1]=0,h[2]=0;for(var u=t;o>u&&!e[u+e.width*f];)u++;for(var c=0;o>u;){if(e[u+f*e.width])if(1===c)h[c]++;else if(2===c){if(this.foundPatternCross(h)&&(r=this.handlePossibleCenter(h,f,u)))return r;h[0]=h[2],h[1]=1,h[2]=0,c=1}else h[++c]++;else 1===c&&c++,h[c]++;u++}if(this.foundPatternCross(h)&&(r=this.handlePossibleCenter(h,f,o),null!==r))return r}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}var r=n(8);e.exports=i},function(e,t){"use strict";function n(e,t,n){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=n,this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var i=Math.abs(e-this.estimatedModuleSize);return 1>=i||i/this.estimatedModuleSize<=1}return!1}}e.exports=n},function(e,t,n){"use strict";function i(e){var t=e.getDimension();if(21>t||1!==(3&t))throw"Error BitMatrixParser";this.bitMatrix=e,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(e,t,n){return this.bitMatrix.getValue(e,t)?n<<1|1:n<<1},this.readFormatInformation=function(){if(this.parsedFormatInfo)return this.parsedFormatInfo;var e,t=0;for(e=0;6>e;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var n=5;n>=0;n--)t=this.copyBit(8,n,t);if(this.parsedFormatInfo=r.decodeFormatInformation(t),this.parsedFormatInfo)return this.parsedFormatInfo;var i=this.bitMatrix.getDimension();t=0;var s=i-8;for(e=i-1;e>=s;e--)t=this.copyBit(e,8,t);for(n=i-7;i>n;n++)t=this.copyBit(8,n,t);if(this.parsedFormatInfo=r.decodeFormatInformation(t),this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getDimension(),t=e-17>>2;if(6>=t)return s.getVersionForNumber(t);var n,i,r=0,o=e-11;for(i=5;i>=0;i--)for(n=e-9;n>=o;n--)r=this.copyBit(n,i,r);if(this.parsedVersion=s.decodeVersionInformation(r),this.parsedVersion&&this.parsedVersion.getDimensionForVersion()===e)return this.parsedVersion;for(r=0,n=5;n>=0;n--)for(i=e-9;i>=o;i--)r=this.copyBit(n,i,r);if(this.parsedVersion=s.decodeVersionInformation(r),this.parsedVersion&&this.parsedVersion.getDimensionForVersion()===e)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=o.forReference(e.dataMask),i=this.bitMatrix.getDimension();n.unmaskBitMatrix(this.bitMatrix,i);for(var r=t.buildFunctionPattern(),s=!0,a=new Array(t.totalCodewords),h=0,w=0,f=0,u=i-1;u>0;u-=2){6===u&&u--;for(var c=0;i>c;c++)for(var l=s?i-1-c:c,d=0;2>d;d++)r.getValue(u-d,l)||(f++,w<<=1,this.bitMatrix.getValue(u-d,l)&&(w|=1),8===f&&(a[h++]=w,f=0,w=0));s^=!0}if(h!==t.totalCodewords)throw"Error readCodewords";return a}}var r=n(4),s=n(6),o=n(11);e.exports=i},function(e,t){"use strict";function n(e,t){this.numDataCodewords=e,this.codewords=t}n.getDataBlocks=function(e,t,i){if(e.length!==t.totalCodewords)throw"ArgumentException";var r,s,o=t.getECBlocksForLevel(i),a=0,h=o.getECBlocks();for(r=0;r<h.length;r++)a+=h[r].count;var w=new Array(a),f=0;for(s=0;s<h.length;s++){var u=h[s];for(r=0;r<u.count;r++){var c=u.dataCodewords,l=o.ecCodewordsPerBlock+c;w[f++]=new n(c,new Array(l))}}for(var d=w[0].codewords.length,v=w.length-1;v>=0;){var g=w[v].codewords.length;if(g===d)break;v--}v++;var m=d-o.ecCodewordsPerBlock,b=0;for(r=0;m>r;r++)for(s=0;f>s;s++)w[s].codewords[r]=e[b++];for(s=v;f>s;s++)w[s].codewords[m]=e[b++];var p=w[0].codewords.length;for(r=m;p>r;r++)for(s=0;f>s;s++){var M=v>s?r:r+1;w[s].codewords[M]=e[b++]}return w},e.exports=n},function(e,t,n){"use strict";function i(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e,t){return 0===(e+t&1)}}function r(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e){return 0===(1&e)}}function s(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e,t){return t%3===0}}function o(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e,t){return(e+t)%3===0}}function a(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e,t){return 0===(u(e,1)+t/3&1)}}function h(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e,t){var n=e*t;return(1&n)+n%3===0}}function w(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e,t){var n=e*t;return 0===((1&n)+n%3&1)}}function f(){this.unmaskBitMatrix=function(e,t){for(var n=0;t>n;n++)for(var i=0;t>i;i++)this.isMasked(n,i)&&e.flip(i,n)},this.isMasked=function(e,t){return 0===((e+t&1)+e*t%3&1)}}var u=n(2).URShift,c={};c.forReference=function(e){if(0>e||e>7)throw"System.ArgumentException";return c.DATA_MASKS[e]},c.DATA_MASKS=[new i,new r,new s,new o,new a,new h,new w,new f],e.exports=c},function(e,t,n){"use strict";var i=n(18),r=n(1).GF256,s=n(9),o=n(10),a=n(17),h={};h.rsDecoder=new i(r.QR_CODE_FIELD),h.correctErrors=function(e,t){var n,i=e.length,r=new Array(i);for(n=0;i>n;n++)r[n]=255&e[n];var s=e.length-t;try{h.rsDecoder.decode(r,s)}catch(o){throw o}for(n=0;t>n;n++)e[n]=r[n]},h.decode=function(e){var t,n=new s(e),i=n.readVersion(),r=n.readFormatInformation().errorCorrectionLevel,w=n.readCodewords(),f=o.getDataBlocks(w,i,r),u=0;for(t=0;t<f.length;t++)u+=f[t].numDataCodewords;for(var c=new Array(u),l=0,d=0;d<f.length;d++){var v=f[d],g=v.codewords,m=v.numDataCodewords;for(h.correctErrors(g,m),t=0;m>t;t++)c[l++]=g[t]}return new a(c,i.versionNumber,r.bits)},e.exports=h},function(e,t,n){"use strict";function i(e,t){this.bits=e,this.points=t}function r(e){this.image=e,this.sizeOfBlackWhiteBlackRun=function(t,n,i,r){var s=Math.abs(r-n)>Math.abs(i-t);if(s){var o=t;t=n,n=o,o=i,i=r,r=o}for(var a=Math.abs(i-t),h=Math.abs(r-n),w=-a>>1,f=r>n?1:-1,u=i>t?1:-1,c=0,l=t,d=n;l!==i;l+=u){var v=s?d:l,g=s?l:d;if(1===c?this.image[v+g*e.width]&&c++:this.image[v+g*e.width]||c++,3===c){var m=l-t,b=d-n;return Math.sqrt(m*m+b*b)}if(w+=h,w>0){if(d===r)break;d+=f,w-=a}}var p=i-t,M=r-n;return Math.sqrt(p*p+M*M)},this.sizeOfBlackWhiteBlackRunBothWays=function(t,n,i,r){var s=this.sizeOfBlackWhiteBlackRun(t,n,i,r),o=1,a=t-(i-t);0>a?(o=t/(t-a),a=0):a>=e.width&&(o=(e.width-1-t)/(a-t),a=e.width-1);var h=Math.floor(n-(r-n)*o);return o=1,0>h?(o=n/(n-h),h=0):h>=e.height&&(o=(e.height-1-n)/(h-n),h=e.height-1),a=Math.floor(t+(a-t)*o),s+=this.sizeOfBlackWhiteBlackRun(t,n,a,h),s-1},this.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.x),Math.floor(e.y),Math.floor(t.x),Math.floor(t.y)),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.x),Math.floor(t.y),Math.floor(e.x),Math.floor(e.y));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},this.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},this.distance=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},this.computeDimension=function(e,t,n,i){var r=Math.round(this.distance(e,t)/i),s=Math.round(this.distance(e,n)/i),o=(r+s>>1)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw"Error"}return o},this.findAlignmentInRegion=function(t,n,i,r){var o=Math.floor(r*t),a=Math.max(0,n-o),h=Math.min(e.width-1,n+o);if(3*t>h-a)throw"Error";var w=Math.max(0,i-o),f=Math.min(e.height-1,i+o),u=new s(this.image,a,w,h-a,f-w,t);return u.find()},this.createTransform=function(e,t,n,i,r){var s,o,a,h,f=r-3.5;return i?(s=i.x,o=i.y,a=h=f-3):(s=t.x-e.x+n.x,o=t.y-e.y+n.y,a=h=f),w.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,a,h,3.5,f,e.x,e.y,t.x,t.y,s,o,n.x,n.y)},this.sampleGrid=function(t,n){return o.sampleGrid3(e,n,t)},this.processFinderPatternInfo=function(e){var t=e.topLeft,n=e.topRight,r=e.bottomLeft,s=this.calculateModuleSize(t,n,r);if(1>s)throw"Error";var o=this.computeDimension(t,n,r,s),h=a.getProvisionalVersionForDimension(o),w=h.getDimensionForVersion()-7,f=null;if(h.alignmentPatternCenters.length>0)for(var u=n.x-t.x+r.x,c=n.y-t.y+r.y,l=1-3/w,d=Math.floor(t.x+l*(u-t.x)),v=Math.floor(t.y+l*(c-t.y)),g=4;16>=g;g<<=1){f=this.findAlignmentInRegion(s,d,v,g);break}var m,b=this.createTransform(t,n,r,f,o),p=this.sampleGrid(b,o);return m=f?[r,t,n,f]:[r,t,n],new i(p,m)},this.detect=function(){var e=(new h).findFinderPattern(this.image);return this.processFinderPatternInfo(e)}}var s=n(7),o=n(16),a=n(6),h=n(15),w=n(5);e.exports=r},function(e,t){"use strict";function n(e,t,n){this.ordinal=e,this.bits=t,this.name=n}n.forBits=function(e){if(0>e||e>=a.length)throw"ArgumentException";return a[e]};var i=new n(0,1,"L"),r=new n(1,0,"M"),s=new n(2,3,"Q"),o=new n(3,2,"H"),a=[r,i,o,s];e.exports=n},function(e,t){"use strict";function n(e){function t(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function n(e,t,n){var i=t.x,r=t.y;return(n.x-i)*(e.y-r)-(n.y-r)*(e.x-i)}var i,r,s,o=t(e[0],e[1]),a=t(e[1],e[2]),h=t(e[0],e[2]);if(a>=o&&a>=h?(r=e[0],i=e[1],s=e[2]):h>=a&&h>=o?(r=e[1],i=e[0],s=e[2]):(r=e[2],i=e[0],s=e[1]),n(i,r,s)<0){var w=i;i=s,s=w}e[0]=i,e[1]=r,e[2]=s}function i(e,t,n){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=n,this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,n){if(Math.abs(t-this.y)<=e&&Math.abs(n-this.x)<=e){var i=Math.abs(e-this.estimatedModuleSize);return 1>=i||i/this.estimatedModuleSize<=1}return!1}}function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}function s(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=[0,0,0,0,0],this.getCrossCheckStateCount=function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount},this.foundPatternCross=function(e){for(var t=0,n=0;5>n;n++){var i=e[n];if(0===i)return!1;t+=i}if(7>t)return!1;var r=Math.floor((t<<h)/7),s=Math.floor(r/2);return Math.abs(r-(e[0]<<h))<s&&Math.abs(r-(e[1]<<h))<s&&Math.abs(3*r-(e[2]<<h))<3*s&&Math.abs(r-(e[3]<<h))<s&&Math.abs(r-(e[4]<<h))<s},this.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},this.crossCheckVertical=function(e,t,n,i){for(var r=this.image,s=r.height,o=this.getCrossCheckStateCount(),a=e;a>=0&&r[t+a*r.width];)o[2]++,a--;if(0>a)return NaN;for(;a>=0&&!r[t+a*r.width]&&o[1]<=n;)o[1]++,a--;if(0>a||o[1]>n)return NaN;for(;a>=0&&r[t+a*r.width]&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;s>a&&r[t+a*r.width];)o[2]++,a++;if(a===s)return NaN;for(;s>a&&!r[t+a*r.width]&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;s>a&&r[t+a*r.width]&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,a):NaN},this.crossCheckHorizontal=function(e,t,n,i){for(var r=this.image,s=r.width,o=this.getCrossCheckStateCount(),a=e;a>=0&&r[a+t*r.width];)o[2]++,a--;if(0>a)return NaN;for(;a>=0&&!r[a+t*r.width]&&o[1]<=n;)o[1]++,a--;if(0>a||o[1]>n)return NaN;for(;a>=0&&r[a+t*r.width]&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;s>a&&r[a+t*r.width];)o[2]++,a++;if(a===s)return NaN;for(;s>a&&!r[a+t*r.width]&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;s>a&&r[a+t*r.width]&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;var h=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(h-i)>=i?NaN:this.foundPatternCross(o)?this.centerFromEnd(o,a):NaN},this.handlePossibleCenter=function(e,t,n){var r=e[0]+e[1]+e[2]+e[3]+e[4],s=this.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),e[2],r);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],r),!isNaN(s))){for(var a=r/7,h=!1,w=this.possibleCenters.length,f=0;w>f;f++){var u=this.possibleCenters[f];if(u.aboutEquals(a,o,s)){u.incrementCount(),h=!0;break}}if(!h){var c=new i(s,o,a);this.possibleCenters.push(c)}return!0}return!1},this.selectBestPatterns=function(){var e=this.possibleCenters.length;if(3>e)throw"Couldn't find enough finder patterns";if(e>3){var t,n=0,i=0;for(t=0;e>t;t++){var r=this.possibleCenters[t].estimatedModuleSize;n+=r,i+=r*r}var s=n/e;this.possibleCenters.sort(function(e,t){var n=Math.abs(t.estimatedModuleSize-s),i=Math.abs(e.estimatedModuleSize-s);return i>n?-1:n===i?0:1});var o=Math.sqrt(i/e-s*s),a=Math.max(.2*s,o);for(t=0;t<this.possibleCenters.length&&this.possibleCenters.length>3;t++){var h=this.possibleCenters[t];Math.abs(h.estimatedModuleSize-s)>a&&(this.possibleCenters.splice(t,1),t--)}}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(e,t){return e.count>t.count?-1:e.count<t.count?1:0}),[this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2]]},this.findRowSkip=function(){var e=this.possibleCenters.length;if(1>=e)return 0;for(var t=null,n=0;e>n;n++){var i=this.possibleCenters[n];if(i.count>=w){if(t)return this.hasSkipped=!0,Math.floor((Math.abs(t.x-i.x)-Math.abs(t.y-i.y))/2);t=i}}return 0},this.haveMultiplyConfirmedCenters=function(){var e,t,n=0,i=0,r=this.possibleCenters.length;for(e=0;r>e;e++)t=this.possibleCenters[e],t.count>=w&&(n++,i+=t.estimatedModuleSize);if(3>n)return!1;var s=i/r,o=0;for(e=0;r>e;e++)t=this.possibleCenters[e],o+=Math.abs(t.estimatedModuleSize-s);return.05*i>=o},this.findFinderPattern=function(e){
var t=!1;this.image=e;var i=e.height,s=e.width,h=Math.floor(3*i/(4*a));(o>h||t)&&(h=o);for(var w,f=!1,u=new Array(5),c=h-1;i>c&&!f;c+=h){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var l=0,d=0;s>d;d++)if(e[d+c*e.width])1===(1&l)&&l++,u[l]++;else if(0===(1&l))if(4===l)if(this.foundPatternCross(u)){if(w=this.handlePossibleCenter(u,c,d))if(h=2,this.hasSkipped)f=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(c+=v-u[2]-h,d=s-1)}else{do d++;while(s>d&&!e[d+c*e.width]);d--}l=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,l=3;else u[++l]++;else u[l]++;this.foundPatternCross(u)&&(w=this.handlePossibleCenter(u,c,s),w&&(h=u[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters())))}var g=this.selectBestPatterns();return n(g),new r(g)}}var o=3,a=57,h=8,w=2;e.exports=s},function(e,t,n){"use strict";var i=n(3),r=n(5),s={};s.checkAndNudgePoints=function(e,t){var n,i,r,s=e.width,o=e.height,a=!0;for(r=0;r<t.length&&a;r+=2){if(n=Math.floor(t[r]),i=Math.floor(t[r+1]),-1>n||n>s||-1>i||i>o)throw"Error.checkAndNudgePoints ";a=!1,-1===n?(t[r]=0,a=!0):n===s&&(t[r]=s-1,a=!0),-1===i?(t[r+1]=0,a=!0):i===o&&(t[r+1]=o-1,a=!0)}for(a=!0,r=t.length-2;r>=0&&a;r-=2){if(n=Math.floor(t[r]),i=Math.floor(t[r+1]),-1>n||n>s||-1>i||i>o)throw"Error.checkAndNudgePoints ";a=!1,-1===n?(t[r]=0,a=!0):n===s&&(t[r]=s-1,a=!0),-1===i?(t[r+1]=0,a=!0):i===o&&(t[r+1]=o-1,a=!0)}},s.sampleGrid3=function(e,t,n){for(var r=new i(t),o=new Array(t<<1),a=0;t>a;a++){var h,w=o.length,f=a+.5;for(h=0;w>h;h+=2)o[h]=(h>>1)+.5,o[h+1]=f;n.transformPoints1(o),s.checkAndNudgePoints(e,o);try{for(h=0;w>h;h+=2){var u=4*Math.floor(o[h])+Math.floor(o[h+1])*e.width*4,c=e[Math.floor(o[h])+e.width*Math.floor(o[h+1])];e.imagedata.data[u]=c?255:0,e.imagedata.data[u+1]=c?255:0,e.imagedata.data[u+2]=0,e.imagedata.data[u+3]=255,c&&r.setValue(h>>1,a)}}catch(l){throw"Error.checkAndNudgePoints"}}return r},s.sampleGridx=function(e,t,n,i,o,a,h,w,f,u,c,l,d,v,g,m,b,p){var M=r.quadrilateralToQuadrilateral(n,i,o,a,h,w,f,u,c,l,d,v,g,m,b,p);return s.sampleGrid3(e,t,M)},e.exports=s},function(e,t){"use strict";function n(e,t,n){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=e,this.numErrorCorrectionCode=n,9>=t?this.dataLengthMode=0:t>=10&&26>=t?this.dataLengthMode=1:t>=27&&40>=t&&(this.dataLengthMode=2),this.getNextBits=function(e){var t,n,i=0;if(e<this.bitPointer+1){var r=0;for(t=0;e>t;t++)r+=1<<t;return r<<=this.bitPointer-e+1,i=(this.blocks[this.blockPointer]&r)>>this.bitPointer-e+1,this.bitPointer-=e,i}if(e<this.bitPointer+1+8){for(n=0,t=0;t<this.bitPointer+1;t++)n+=1<<t;return i=(this.blocks[this.blockPointer]&n)<<e-(this.bitPointer+1),this.blockPointer++,i+=this.blocks[this.blockPointer]>>8-(e-(this.bitPointer+1)),this.bitPointer=this.bitPointer-e%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),i}if(e<this.bitPointer+1+16){n=0;var s=0;for(t=0;t<this.bitPointer+1;t++)n+=1<<t;var o=(this.blocks[this.blockPointer]&n)<<e-(this.bitPointer+1);this.blockPointer++;var a=this.blocks[this.blockPointer]<<e-(this.bitPointer+1+8);for(this.blockPointer++,t=0;t<e-(this.bitPointer+1+8);t++)s+=1<<t;s<<=8-(e-(this.bitPointer+1+8));var h=(this.blocks[this.blockPointer]&s)>>8-(e-(this.bitPointer+1+8));return i=o+a+h,this.bitPointer=this.bitPointer-(e-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),i}return 0},this.nextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(e){for(var t=0;;){if(e>>t===1)break;t++}return this.getNextBits(i[this.dataLengthMode][t])},this.getRomanAndFigureString=function(e){var t=e,n=0,i="",r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];do if(t>1){n=this.getNextBits(11);var s=Math.floor(n/45),o=n%45;i+=r[s],i+=r[o],t-=2}else 1===t&&(n=this.getNextBits(6),i+=r[n],t-=1);while(t>0);return i},this.getFigureString=function(e){var t=e,n=0,i="";do t>=3?(n=this.getNextBits(10),100>n&&(i+="0"),10>n&&(i+="0"),t-=3):2===t?(n=this.getNextBits(7),10>n&&(i+="0"),t-=2):1===t&&(n=this.getNextBits(4),t-=1),i+=n;while(t>0);return i},this.get8bitByteArray=function(e){var t=e,n=0,i=[];do n=this.getNextBits(8),i.push(n),t--;while(t>0);return i},this.getKanjiString=function(e){var t=e,n=0,i="";do{n=this.getNextBits(13);var r=n%192,s=n/192,o=(s<<8)+r,a=0;a=40956>=o+33088?o+33088:o+49472,i+=String.fromCharCode(a),t--}while(t>0);return i},this.getDataByte=function(){for(var e=[],t=1,n=2,i=4,r=8;;){var s=this.nextMode();if(0===s){if(e.length>0)break;throw"Empty data block"}if(s!==t&&s!==n&&s!==i&&s!==r)throw"Invalid mode: "+s+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";var o=this.getDataLength(s);if(1>o)throw"Invalid data length: "+o;var a,h;switch(s){case t:a=this.getFigureString(o),h=new Array(a.length);for(var w=0;w<a.length;w++)h[w]=a.charCodeAt(w);e.push(h);break;case n:for(a=this.getRomanAndFigureString(o),h=new Array(a.length),w=0;w<a.length;w++)h[w]=a.charCodeAt(w);e.push(h);break;case i:var f=this.get8bitByteArray(o);e.push(f);break;case r:a=this.getKanjiString(o),e.push(a)}}return e}}var i=[[10,9,8,8],[12,11,16,10],[14,13,16,12]];e.exports=n},function(e,t,n){"use strict";function i(e){this.field=e,this.decode=function(e,t){var n,i=new s(this.field,e),o=new Array(t);for(n=0;n<o.length;n++)o[n]=0;var a=!1,h=!0;for(n=0;t>n;n++){var w=i.evaluateAt(this.field.exp(a?n+1:n));o[o.length-1-n]=w,w&&(h=!1)}if(!h){var f=new s(this.field,o),u=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),f,t),c=u[0],l=u[1],d=this.findErrorLocations(c),v=this.findErrorMagnitudes(l,d,a);for(n=0;n<d.length;n++){var g=e.length-1-this.field.log(d[n]);if(0>g)throw"ReedSolomonException Bad error location";e[g]=r.addOrSubtract(e[g],v[n])}}},this.runEuclideanAlgorithm=function(e,t,n){if(e.degree<t.degree){var i=e;e=t,t=i}for(var r=e,s=t,o=this.field.one,a=this.field.zero,h=this.field.zero,w=this.field.one;s.degree>=Math.floor(n/2);){var f=r,u=o,c=h;if(r=s,o=a,h=w,r.zero)throw"r_{i-1} was zero";s=f;for(var l=this.field.zero,d=r.getCoefficient(r.degree),v=this.field.inverse(d);s.degree>=r.degree&&!s.zero;){var g=s.degree-r.degree,m=this.field.multiply(s.getCoefficient(s.degree),v);l=l.addOrSubtract(this.field.buildMonomial(g,m)),s=s.addOrSubtract(r.multiplyByMonomial(g,m))}a=l.multiply1(o).addOrSubtract(u),w=l.multiply1(h).addOrSubtract(c)}var b=w.getCoefficient(0);if(0===b)throw"ReedSolomonException sigmaTilde(0) was zero";var p=this.field.inverse(b),M=w.multiply2(p),C=s.multiply2(p);return[M,C]},this.findErrorLocations=function(e){var t=e.degree;if(1===t)return new Array(e.getCoefficient(1));for(var n=new Array(t),i=0,r=1;256>r&&t>i;r++)0===e.evaluateAt(r)&&(n[i]=this.field.inverse(r),i++);if(i!==t)throw"Error locator degree does not match number of roots";return n},this.findErrorMagnitudes=function(e,t,n){for(var i=t.length,s=new Array(i),o=0;i>o;o++){for(var a=this.field.inverse(t[o]),h=1,w=0;i>w;w++)o!==w&&(h=this.field.multiply(h,r.addOrSubtract(1,this.field.multiply(t[w],a))));s[o]=this.field.multiply(e.evaluateAt(a),this.field.inverse(h)),n&&(s[o]=this.field.multiply(s[o],a))}return s}}var r=n(1).GF256,s=n(1).GF256Poly;e.exports=i}])});